# FAQ

## Deployment
Link - [Anarasty/next-js-portfolio](https://anarasty.github.io/tasty_drop_clone/)

## Main purpose of this app

Интересная тема проекта (лично для меня). Хотелось попробовать реализовать идею на максимально ванильных технологиях (без доп фреймворков и бекэнда).

### account.js
Управляет псевдо-аккаунтом пользователя на сайте. Хранится всё в localStorage, т.е. чисто на клиенте — без настоящей авторизации.

1. Инициализация данных в localStorage
При первом заходе на сайт проверяется, есть ли в localStorage имя/пароль/баланс. Если нет — создаются дефолтные значения: Для демо-аккаунта я хардкодно инициализирую значения в localStorage, чтобы пользователь мог “авторизоваться” без реального сервера.

2. Загрузка данных на страницу
После загрузки DOM, заполняются соответствующие <span> элементы из localStorage. Используется DOMContentLoaded, чтобы данные вставились только после полной загрузки HTML.

3. Пополнение баланса
Пополнение реализовано локально для симуляции доната. Используется parseFloat, toFixed(2) для имитации валютной логики.

-----

### balance.js

1. Инициализация баланса:
Это дефолтная установка баланса — чтобы пользователь сразу видел стартовую сумму, даже если у него пустой localStorage.

2. Функция loadBalance()
Это часть рендера UI. Баланс берётся из localStorage, и при загрузке страницы вставляется в DOM без запроса на сервер.

3. Слушатель загрузки DOM:
DOMContentLoaded — это минимальная безопасная точка, чтобы обращаться к DOM. Не надо ждать полной загрузки стилей, картинок и т.д., как в window.onload.

-----

### inventory.js

1. Функция loadInventory()
Проверяю: если инвентарь пустой (нет ключей в объекте), рендерю заглушку.

2. Функция sellItem(itemName)
Забираем данные из localStorage. Получаем предмет по имени.

3. Логика продажи:
Если кол-во больше 1 — просто уменьшаем. Если это был последний — удаляем предмет из инвентаря.

4. Обновление баланса:
Обновляем и сохраняем изменения. Увеличиваем баланс на цену проданного предмета

5. Финал:
Обновляем баланс на странице. Перерисовываем весь инвентарь

### script.js
Генерация предметов для прокрутки. Плавный запуск прокрутки. Выбор и выдача награды. Работа с балансом и localStorage. Отображение всплывающих окон (попапов)

1. getItem(excludeItem = null)
Генерирует случайный предмет по шансам. Используется грубая система вероятности: кидаем число от 0 до 99999 и смотрим, какой elm.chance его покрывает.

2. generateItems()
Генерирует 61 предмет в список, исключая дубли подряд. Каждый айтем сериализуется в data-item — потом будет легко достать.

3. generateRewardsList()
Сортируем предметы по шансу (от редкого к каммонкам). Показываем пользователю, что он может выбить.

4. start() — запуск рулетки
Баланс минус кейс. Обновление UI. Генерация новых предметов в .roll__list

5. Прокрутка
Вот где зарыта награда — ровно 31-й айтем будет финальным.

6. Финал рулетки
Айтем получает класс .active. Его JSON достаётся, сохраняется в localStorage

7. addItemToLocalStorage(item)
Просто обновляет локальный инвентарь, инкрементируя quantity, если предмет уже есть.
